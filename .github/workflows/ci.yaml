name: "Laravel CI"

on:
  push:
    branches:
      - 'main'

  pull_request:
    types: [opened, synchronize, reopened]
    branches:
      - 'main'

permissions:
  contents: read

jobs:
  laravel-tests:
    uses: ./.github/workflows/reusable-ci.yaml
    if: |
      (
      !contains(github.event.pull_request.labels.*.name, vars.DEPLOY_PREVIEW_LABEL)
      )
    secrets:
      APP_KEY_CI: ${{ secrets.APP_KEY_CI }}
